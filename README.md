# Nobre Hub ğŸš€

**O Hub Definitivo para GestÃ£o de AgÃªncias de Marketing**

O **Nobre Hub** Ã© uma plataforma "all-in-one" desenvolvida para centralizar e otimizar a operaÃ§Ã£o de agÃªncias de marketing. Desde a captaÃ§Ã£o do lead atÃ© a entrega final e pÃ³s-venda, tudo acontece aqui. Com foco em comunicaÃ§Ã£o Ã¡gil via WhatsApp, controle visual de produÃ§Ã£o e ferramentas estratÃ©gicas avanÃ§adas, o Nobre Hub elimina a necessidade de mÃºltiplas ferramentas desconexas.

---

## âœ¨ Principais Funcionalidades

O Nobre Hub cobre toda a jornada do cliente dentro da agÃªncia, alÃ©m de fornecer ferramentas estratÃ©gicas e criativas para o time.

### ğŸ¤ CRM & Vendas
- **Kanban de Vendas:** Pipeline visual interativo com drag & drop e estÃ¡gios customizÃ¡veis.
- **Lead 360Â°:** VisÃ£o completa de cada contato â€” histÃ³rico de conversas, atividades, negÃ³cios, arquivos e playbooks.
- **Inbox Unificado:** Central de mensagens estilo WhatsApp Web com suporte a Ã¡udio, imagem, templates e drafts inteligentes.
- **GestÃ£o de Perdas:** Motivos de perda customizÃ¡veis para anÃ¡lise e otimizaÃ§Ã£o do funil.
- **Base de Contatos:** GestÃ£o completa com tags, filtros avanÃ§ados, export CSV e aÃ§Ãµes em massa (atribuiÃ§Ã£o, movimentaÃ§Ã£o de estÃ¡gio).
- **Playbook & Templates:** Sistema de templates de mensagens com integraÃ§Ã£o ao draft do chat para personalizaÃ§Ã£o antes do envio.

### ğŸ­ ProduÃ§Ã£o & Projetos
- **Dashboard de ProduÃ§Ã£o:** Boards individuais por produtor com visÃ£o consolidada para o lÃ­der (ProduÃ§Ã£o, AlteraÃ§Ãµes, Finalizados).
- **Sistema de PontuaÃ§Ã£o:** CÃ¡lculo inteligente â€” `Total = Base (Produto) + DuraÃ§Ã£o (VÃ­deo) + Extras (Manual)`.
- **Lista de DistribuiÃ§Ã£o:** Fila central com modos AutomÃ¡tico (equilÃ­brio de carga), Manual e SugestÃ£o (vendedora sugere, lÃ­der valida).
- **Fluxo de RevisÃ£o:** Sistema de aprovaÃ§Ãµes e loop de alteraÃ§Ãµes que retorna automaticamente ao produtor original.
- **CriaÃ§Ã£o Integrada:** Projetos originam do CRM com link automÃ¡tico ao lead, garantindo rastreabilidade completa.

### ğŸ“¦ PÃ³s-Venda
- **Inbox de PÃ³s-Venda:** Interface split-column com visÃ£o diferenciada para lÃ­deres (3 colunas) e atendentes.
- **DistribuiÃ§Ã£o AutomÃ¡tica:** Fila com inteligÃªncia de retorno (identifica quem jÃ¡ atendeu o cliente).
- **Monitoramento em Tempo Real:** Acesso ao status da produÃ§Ã£o em tempo real pela pÃ³s-vendedora via Supabase Realtime.
- **Ciclo de Vida Completo:** `Aguardando VÃ­deo â†’ Entregue â†’ AprovaÃ§Ã£o/AlteraÃ§Ã£o â†’ Pagamento â†’ ConcluÃ­do`.
- **Loop de AlteraÃ§Ã£o:** RevisÃµes retornam automaticamente ao produtor original sem re-briefing.

### ğŸ“Š Dashboard & Analytics
Dashboards setorizados com dados em tempo real:

- **ğŸ“ˆ VisÃ£o Geral:** MÃ©tricas macro â€” projetos, deadlines, eficiÃªncia da equipe e velocidade de entrega.
- **ğŸ’° Financeiro:** Receita, despesas, ticket mÃ©dio, contas a receber e breakdown operacional (padrÃ£o Sales-Derivative).
- **ğŸ¯ Vendas:** Funil de conversÃ£o (Recharts), atribuiÃ§Ã£o de origem, tendÃªncias diÃ¡rias, ranking de vendedoras e pipeline overview.
- **ğŸ­ ProduÃ§Ã£o:** Ranking diÃ¡rio com pÃ³dio, meta de equipe, pontos totais, distribuiÃ§Ã£o por categoria e cards de destaques/MVPs.
- **ğŸ¤ PÃ³s-Venda:** Ranking de atendentes, receita por saldo final, tickets e satisfaÃ§Ã£o.
- **ğŸ‘‘ Administrativo:** PresenÃ§a online em tempo real (RTDB), carga de trabalho e produtividade por colaborador.

### ğŸ§  EstratÃ©gico
MÃ³dulo dedicado Ã  gestÃ£o de iniciativas de alto nÃ­vel, independente dos boards operacionais:

- **ğŸ“ AnotaÃ§Ãµes (Obsidian-Style):** Editor WYSIWYG com Tiptap/ProseMirror, formataÃ§Ã£o em tempo real, task lists e **colaboraÃ§Ã£o multiplayer** com presenÃ§a em tempo real (RTDB), sincronizaÃ§Ã£o ghost-free e indicadores de salvamento.
- **ğŸ“‹ Projetos EstratÃ©gicos:** GestÃ£o hierÃ¡rquica com sub-tarefas (2 nÃ­veis), prioridades color-coded, tags customizÃ¡veis, multi-assignee com filtro de setor, due dates semÃ¢nticas e barra de progresso dinÃ¢mica.
- **ğŸ“± GestÃ£o de Redes Sociais:** Dashboard de clientes com status de contrato (Ativo/Alerta/Expirado), link de Instagram integrado, Post Tracker com calendÃ¡rio interativo e tracking de entregas por status cycling.

> ğŸ’¡ **Notas EstratÃ©gicas** utilizam Supabase Realtime para colaboraÃ§Ã£o multiplayer com presenÃ§a em tempo real e sincronizaÃ§Ã£o ghost-free.

### ğŸ¨ Studio (AI)
Ferramentas criativas com InteligÃªncia Artificial integrada:

- **Gerador de Imagens:** CriaÃ§Ã£o de imagens com IA via prompts diretamente na plataforma.
- **Estilos de Imagem:** Biblioteca de estilos e presets para geraÃ§Ã£o consistente.
- **Galeria:** RepositÃ³rio centralizado de todas as imagens geradas, com upload para Storage.

### ğŸ‘¥ GestÃ£o de Equipe
- **Chat Interno:** ComunicaÃ§Ã£o direta entre membros (DMs e Grupos) sem sair da plataforma.
- **Perfil do Colaborador:** Modal avanÃ§ado com tabs de informaÃ§Ãµes, metas derivadas e mÃ©tricas por setor.
- **Fotos Diferenciadas:** Sistema dual de fotos â€” Avatar (1:1) para Ã­cones e Banner (9:16) para headers, com sincronizaÃ§Ã£o automÃ¡tica system-wide.
- **PresenÃ§a em Tempo Real:** Indicadores de online/offline via Supabase Realtime com heartbeat e cleanup automÃ¡tico.

### ğŸ”” NotificaÃ§Ãµes
- **Toast Notifications:** Feedback visual instantÃ¢neo para aÃ§Ãµes do sistema.
- **Notification Drawer:** Central de notificaÃ§Ãµes com histÃ³rico e aÃ§Ãµes rÃ¡pidas.

### âš™ï¸ ConfiguraÃ§Ãµes
Painel administrativo completo com:

| PÃ¡gina | DescriÃ§Ã£o |
|--------|-----------|
| **OrganizaÃ§Ã£o** | Dados da empresa e branding |
| **Colaboradores** | GestÃ£o completa de membros da equipe |
| **Cargos & Setores** | Estrutura organizacional |
| **PermissÃµes (RBAC)** | Controle granular por cargo â€” o que cada role pode ver e editar |
| **Metas** | ConfiguraÃ§Ã£o de pontos por produto, scoring de vÃ­deo por duraÃ§Ã£o e metas diÃ¡rias |
| **Feriados** | CalendÃ¡rio de feriados nacionais (Brasil API) + folgas customizadas da equipe |
| **Produtos** | CatÃ¡logo com categorias (Consultoria, GestÃ£o, Assinatura, VÃ­deo, Arte) e preÃ§os opcionais |
| **Pipeline** | ConfiguraÃ§Ã£o dos estÃ¡gios do funil de vendas |
| **Motivos de Perda** | RazÃµes customizÃ¡veis para leads perdidos |
| **DistribuiÃ§Ã£o de Leads** | Regras de distribuiÃ§Ã£o automÃ¡tica |
| **IntegraÃ§Ãµes** | ConfiguraÃ§Ã£o de WhatsApp, Google Drive e Webhooks |
| **AparÃªncia** | Tema e personalizaÃ§Ã£o visual |

---

## ğŸ› ï¸ Tecnologias Utilizadas

ConstruÃ­do com uma stack moderna e robusta para performance e escalabilidade:

| Categoria | Tecnologia |
|-----------|------------|
| **Frontend** | React 19 + TypeScript + Vite |
| **EstilizaÃ§Ã£o** | CSS Modules + Design System PrÃ³prio (25+ componentes) |
| **Estado** | Zustand (Stores modulares por feature) |
| **Backend / DB** | Supabase (PostgreSQL, Auth, Realtime, Edge Functions) |
| **Storage** | Firebase Storage (uploads de imagens e arquivos) |
| **Editor Rich Text** | Tiptap / ProseMirror (Notas EstratÃ©gicas) |
| **GrÃ¡ficos** | Recharts (Dashboard Analytics) |
| **Hospedagem** | Vercel (Node.js Functions) |

---

## ğŸ§© Arquitetura do Projeto

Arquitetura modular e escalÃ¡vel seguindo padrÃµes de Feature-Based Structure e Repository Pattern:

### Estrutura Base
```
src/
â”œâ”€â”€ app/            # Componente raiz, providers e setup
â”œâ”€â”€ config/         # RBAC, rotas, permissÃµes, constantes
â”œâ”€â”€ data/           # Data Layer Unificado (Repository Pattern)
â”‚   â”œâ”€â”€ providers/      # Supabase driver (+ Firebase Storage legacy)
â”‚   â”œâ”€â”€ repositories/   # Contratos e implementaÃ§Ãµes
â”‚   â”œâ”€â”€ services/       # LÃ³gica de negÃ³cio
â”‚   â””â”€â”€ hooks/          # React hooks reativos
â”œâ”€â”€ design-system/  # Biblioteca UI (25+ componentes)
â”‚   â”œâ”€â”€ tokens/         # CSS Variables (cores, tipografia, espaÃ§amentos)
â”‚   â””â”€â”€ components/     # Button, Input, Modal, Dropdown, Tag, etc.
â”œâ”€â”€ features/       # MÃ³dulos de negÃ³cio independentes
â”‚   â”œâ”€â”€ auth/           # AutenticaÃ§Ã£o
â”‚   â”œâ”€â”€ crm/            # CRM, Kanban, Lead 360Â°, Contatos
â”‚   â”œâ”€â”€ dashboard/      # Analytics (5 setores)
â”‚   â”œâ”€â”€ inbox/          # WhatsApp Inbox unificado
â”‚   â”œâ”€â”€ notifications/  # Sistema de notificaÃ§Ãµes
â”‚   â”œâ”€â”€ pos-vendas/     # PÃ³s-venda e entregas
â”‚   â”œâ”€â”€ presence/       # PresenÃ§a online (RTDB)
â”‚   â”œâ”€â”€ production/     # ProduÃ§Ã£o e distribuiÃ§Ã£o
â”‚   â”œâ”€â”€ settings/       # Painel administrativo (13 pÃ¡ginas)
â”‚   â”œâ”€â”€ strategic/      # AnotaÃ§Ãµes, Projetos e Redes Sociais
â”‚   â”œâ”€â”€ studio/         # IA Generativa (Imagens)
â”‚   â””â”€â”€ team/           # Chat interno e gestÃ£o de equipe
â”œâ”€â”€ hooks/          # Hooks globais (usePermission, usePresence)
â”œâ”€â”€ stores/         # Zustand stores (Auth, Roles, Collaborators)
â””â”€â”€ utils/          # Formatadores e helpers
```

### PrincÃ­pios Arquiteturais
- **Features Autocontidas:** Cada mÃ³dulo possui componentes, tipos, serviÃ§os e stores prÃ³prios.
- **Repository Pattern:** Camada de abstraÃ§Ã£o sobre Supabase (PostgreSQL) para isolamento de dependÃªncia.
- **RBAC DinÃ¢mico:** PermissÃµes mapeadas por cargo via JOINs (`roles` + `role_permissions`) com verificaÃ§Ã£o via `usePermission`.
- **Supabase Realtime:** Channels e Postgres Changes para presenÃ§a, colaboraÃ§Ã£o e atualizaÃ§Ãµes em tempo real.
- **Design System First:** Todos os componentes UI seguem tokens e padrÃµes centralizados.

---

## ğŸ”Œ IntegraÃ§Ãµes

O Nobre Hub se conecta com as ferramentas essenciais do dia a dia:

- **Supabase:** Auth, Database (PostgreSQL), Realtime Channels e Edge Functions.
- **Firebase Storage:** Upload e gestÃ£o de fotos de colaboradores e imagens geradas por IA (legacy, migraÃ§Ã£o planejada para Supabase Storage).
- **WhatsApp (360Dialog / Evolution API):** Envio e recebimento de mensagens diretamente pelo painel, com suporte a templates, mÃ­dias e status de entrega.
- **Google Drive:** OrganizaÃ§Ã£o automÃ¡tica de pastas e arquivos dos projetos.
- **Brasil API:** ImportaÃ§Ã£o automÃ¡tica de feriados nacionais para cÃ¡lculo de metas.
- **Webhooks:** Recebimento automÃ¡tico de leads vindos de Landing Pages e formulÃ¡rios externos.

---

## ğŸš€ Como Executar

Para rodar o projeto localmente:

1. **Instale as dependÃªncias:**
   ```bash
   npm install
   ```

2. **Configure as variÃ¡veis de ambiente:**
   Crie um arquivo `.env` na raiz baseado no `.env.example`.

3. **Inicie o servidor de desenvolvimento:**
   ```bash
   npm run dev
   ```

---

## ğŸ“‹ Design System

O Nobre Hub possui um Design System proprietÃ¡rio com **25+ componentes** reutilizÃ¡veis:

| Componente | DescriÃ§Ã£o |
|------------|-----------|
| `Button` | Variantes primary, secondary, ghost, danger |
| `Input` | Campos com Ã­cones e validaÃ§Ã£o |
| `Dropdown` | Select customizado (substitui `<select>` nativo) |
| `Modal` | DiÃ¡logos e modais com backdrop |
| `ConfirmModal` | Modal de confirmaÃ§Ã£o com aÃ§Ãµes destrutivas |
| `Tag` | Pills/tags coloridas |
| `Badge` | Contadores e indicadores |
| `Checkbox` | Checkboxes estilizados |
| `Switch` | Toggles on/off |
| `Spinner` | Loading indicators |
| `Card` | Containers com shadow |
| `Avatar` | Avatares com iniciais e foto |
| `Tooltip` | Tooltips informativos |
| `Tabs` | NavegaÃ§Ã£o por abas |
| `ProgressBar` | Barras de progresso animadas |
| `Skeleton` | Loading placeholders |
| `ScrollArea` | Scroll areas customizadas |
| `Textarea` | Ãreas de texto expandÃ­veis |
| `NumberInput` | Input numÃ©rico com formataÃ§Ã£o |
| `PhoneInput` | Input de telefone com mÃ¡scara |
| `EmptyState` | Estado vazio com ilustraÃ§Ã£o |
| `LazyImage` | Imagens com lazy loading |
| `PersonCard` | Cards de pessoa/colaborador |
| `PremiumButton` | BotÃ£o premium com gradiente |
| `Chat` | Componentes de chat (9 sub-componentes) |

**Tokens CSS:** Dark mode como padrÃ£o, com variÃ¡veis para cores, espaÃ§amentos, tipografia, bordas e sombras. PadrÃ£o de focus com glow vermelho (`box-shadow: 0 0 10px var(--color-primary-500)`).

---

*Desenvolvido pela equipe Nobre Hub*
