# GUIA MESTRE DE ESTRUTURAÇÃO: NOBRE HUB (INSPIRADO NO CLINT CRM)

Este documento consolida a análise da plataforma Clint, o guia de funcionalidades inspiradoras e a priorização dos Playbooks mais críticos para o desenvolvimento inicial do Nobre Hub.

---

## 1. Mergulho Profundo: A Experiência Clint CRM e Lições para o Nobre Hub

O vídeo de demonstração da Clint revela uma plataforma projetada para ser o **centro de comando** de um vendedor, focada em eliminar a troca de contexto e garantir a padronização do processo de vendas.

### 1.1. A Filosofia da "Visão 360º"
A Clint centraliza a informação de forma inteligente. Ao abrir um card de lead, o vendedor tem acesso imediato a uma linha do tempo cronológica de **tudo** o que aconteceu (mensagens, mudanças de etapa, notas internas). A chave é a **Ação sem Troca de Contexto**, permitindo que o vendedor envie um WhatsApp, agende uma reunião ou mova o lead de etapa **dentro da mesma tela**, reduzindo a "fadiga de abas" e aumentando a produtividade.

### 1.2. Playbooks: O Guia do Vendedor
Os Playbooks resolvem a inconsistência na equipe de vendas. Cada etapa do funil pode ter um "roteiro" integrado, garantindo que SDRs e Closers sigam o padrão de qualidade da Nobre Marketing.

### 1.3. Atendimento Omnichannel Real
A plataforma organiza as mensagens em uma **Inbox Unificada** com filtros claros ("Minhas Conversas", "Aguardando Atendimento"). A **Integração com CRM** permite que o chat esteja ao lado dos dados do lead, facilitando o uso de informações personalizadas durante a conversa.

### 1.4. Inteligência de Marketing (O Diferencial para Agências)
Para a Nobre Marketing, a parte de BI é crucial. O **Rastreamento de UTM** e a capacidade de calcular o **ROI Real** (quanto dinheiro os leads de uma campanha trouxeram) permitem que a agência prove seu valor para os clientes de forma incontestável.

### 1.5. Automação e IA: O Futuro do CRM
A Clint utiliza IA para eficiência, como a **Transcrição de Calls** e a **Sumarização por IA**, que geram resumos e listas de tarefas automaticamente, economizando horas de trabalho manual. O **Flow Builder** permite criar automações complexas ("Se isso, então aquilo") para que a equipe foque apenas nos leads quentes.

---

## 2. Guia de Funcionalidades Inspiradoras: Ações para o Nobre Hub

Este guia traduz as lições da Clint em ações concretas para o desenvolvimento do Nobre Hub, organizadas por pilares.

### 2.1. Pilar: Gestão de Vendas (CRM Core)

| Funcionalidade Inspiradora | Descrição para o Nobre Hub | Módulos Afetados |
| :--- | :--- | :--- |
| **Visão 360º no Card** | Modal com 3 painéis: **Detalhes do Lead**, **Linha do Tempo (AuditLog + Messages)** e **Ações Rápidas (Playbook)**. | `LeadDetailModal.tsx`, `AuditLog` (v3.0) |
| **Playbooks Integrados** | Exibir o "Script da Etapa" (texto ou checklist) baseado no `PipelineStage` atual do lead. | `PipelineStage` (v3.0), `Activity` (v3.0) |
| **Ações de Um Clique** | Botões dentro do modal do lead para: Mover para Próxima Etapa, Criar Tarefa, Enviar Template de WhatsApp. | `LeadDetailModal.tsx`, `backend/routes/leads.ts` |

### 2.2. Pilar: Atendimento Omnichannel

| Funcionalidade Inspiradora | Descrição para o Nobre Hub | Módulos Afetados |
| :--- | :--- | :--- |
| **Contexto de Vendas no Chat** | `ChatView.tsx` com barra lateral fixa exibindo dados do `Lead` e botão de mudança de etapa. | `ChatView.tsx`, `Conversation` |
| **Filtros Inteligentes de Inbox** | Implementar filtros claros: "Meus Atendimentos", "Fila de Espera (Não Atribuídos)", "Fechados Hoje". | `Inbox.tsx`, `Conversation` |
| **Templates de Resposta Rápida** | Módulo de gerenciamento de templates com variáveis personalizadas (ex: `Olá, {Lead.name}`). | `backend/routes/whatsapp.ts` |

### 2.3. Pilar: Inteligência de Dados (BI)

| Funcionalidade Inspiradora | Descrição para o Nobre Hub | Módulos Afetados |
| :--- | :--- | :--- |
| **Rastreamento de UTM** | Captura de `utm_source`, `utm_medium`, etc., e armazenamento no modelo `LeadSourceData` (v3.0). | `backend/routes/public.ts`, `LeadSourceData` (v3.0) |
| **Funil de Conversão Visual** | Dashboard mostrando a taxa de conversão (em %) entre cada `PipelineStage`. | `Analytics.tsx`, `backend/routes/stats.ts` |
| **Performance por Agente** | Relatório que compara métricas-chave por vendedor: Leads Atribuídos, Taxa de Conversão, Tempo Médio na Etapa. | `TeamManagement.tsx`, `backend/routes/stats.ts` |

### 2.4. Pilar: Automação e IA

| Funcionalidade Inspiradora | Descrição para o Nobre Hub | Módulos Afetados |
| :--- | :--- | :--- |
| **Flow Builder Visual** | Finalizar o `FlowBuilder.tsx` para criar Playbooks usando a estrutura JSON definida no `AutomationFlow` (v3.0). | `FlowBuilder.tsx`, `AutomationFlow` (v3.0) |
| **Transcrição de Áudio** | Integrar a API de transcrição (ex: OpenAI Whisper) para converter áudios de WhatsApp em texto. | `backend/services/dialog360.ts`, `Message` |
| **Sumarização de Conversas** | Botão que usa um LLM (GPT-4) para gerar um resumo do histórico de mensagens do lead. | `backend/services/ai.ts` (NOVO), `ChatView.tsx` |

---

## 3. Priorização de Playbooks: Os 3 Mais Críticos para o Nobre Hub

A prioridade inicial deve ser automatizar os processos que garantem a **consistência da venda** e a **fluidez da operação**.

### 3.1. Playbook Crítico #1: Qualificação de Lead (SDR)

**Objetivo:** Padronizar o esforço inicial e garantir que nenhum lead seja esquecido.

| Gatilho | Condição | Ação (Passo 1) | Ação (Passo 2) |
| :--- | :--- | :--- | :--- |
| **Lead entra na etapa "Qualificação"** | **Nenhuma** | **Criação de Atividade:** Tarefa "Primeiro Contato (Ligação)" atribuída ao SDR. | **Criação de Atividade:** Tarefa "Follow-up WhatsApp" agendada para 4 horas depois. |
| **Lead não responde em 24h** | **Lead.lastActivityAt** > 24 horas | **Ação:** Enviar Template de WhatsApp "Tentativa de Contato 2". | **Ação:** Mover Lead para a etapa "Perdido/Frio" se não houver resposta em 48h. |

### 3.2. Playbook Crítico #2: Transição Vendas → Produção

**Objetivo:** Automatizar o *handover* entre o comercial e a produção, eliminando planilhas e garantindo o início imediato do serviço.

| Gatilho | Condição | Ação (Passo 1) | Ação (Passo 2) |
| :--- | :--- | :--- | :--- |
| **Lead movido para a etapa "Fechado"** | **Nenhuma** | **Ação:** Mover Lead para o Pipeline "Produção". | **Criação de Atividade:** Tarefa "Criar Card de Entrega" atribuída ao Gerente de Produção. |
| **Lead movido para o Pipeline "Produção"** | **Nenhuma** | **Ação:** Enviar Template de WhatsApp "Boas-vindas ao Cliente" (via Closer). | **Ação:** Enviar E-mail de Onboarding (via Gerente de Produção). |

### 3.3. Playbook Crítico #3: Alerta de Lead Quente (Alto Valor)

**Objetivo:** Garantir atenção imediata e escalada gerencial para negócios de alto valor.

| Gatilho | Condição | Ação (Passo 1) | Ação (Passo 2) |
| :--- | :--- | :--- | :--- |
| **Lead entra na etapa "Proposta"** | **Lead.estimatedValue** > R$ 15.000 | **Ação:** Enviar notificação de alerta (e-mail/Slack) para o Gerente de Vendas. | **Criação de Atividade:** Tarefa "Revisão de Proposta" atribuída ao Gerente de Vendas. |
| **Lead de Alto Valor sem Atividade** | **Lead.estimatedValue** > R$ 15.000 **E** **Lead.lastActivityAt** > 72 horas | **Ação:** Mover Lead para a etapa "Escalada (Gerência)". | **Ação:** Enviar notificação de alerta (e-mail/Slack) para o CEO/Diretor. |
